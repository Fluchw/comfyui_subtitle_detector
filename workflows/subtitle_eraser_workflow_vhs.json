{
  "id": "bf0e46c1-3735-4c8a-8229-e44fbb681fb5",
  "revision": 0,
  "last_node_id": 13,
  "last_link_id": 14,
  "nodes": [
    {
      "id": 1,
      "type": "VHS_LoadVideo",
      "pos": [
        50,
        200
      ],
      "size": [
        250,
        453.5
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            1,
            5
          ]
        },
        {
          "name": "frame_count",
          "type": "INT",
          "slot_index": 1,
          "links": null
        },
        {
          "name": "audio",
          "type": "AUDIO",
          "slot_index": 2,
          "links": [
            11
          ]
        },
        {
          "name": "video_info",
          "type": "VHS_VIDEOINFO",
          "slot_index": 3,
          "links": [
            9
          ]
        }
      ],
      "title": "1. Load Video",
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "3234937ff5f3ca19068aaba5042771514de2429d",
        "Node name for S&R": "VHS_LoadVideo"
      },
      "widgets_values": {
        "video": "test.mp4",
        "force_rate": 0,
        "custom_width": 0,
        "custom_height": 0,
        "frame_load_cap": 0,
        "skip_first_frames": 0,
        "select_every_nth": 1,
        "format": "AnimateDiff",
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "filename": "test.mp4",
            "type": "input",
            "format": "video/mp4",
            "force_rate": 0,
            "frame_load_cap": 0,
            "skip_first_frames": 0,
            "select_every_nth": 1
          }
        }
      }
    },
    {
      "id": 2,
      "type": "SubtitleDetectorRapidOCR",
      "pos": [
        350,
        150
      ],
      "size": [
        315,
        400
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1
        }
      ],
      "outputs": [
        {
          "name": "annotated_images",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            12
          ]
        },
        {
          "name": "subtitle_mask",
          "type": "MASK",
          "slot_index": 1,
          "links": [
            3
          ]
        }
      ],
      "title": "2. Detect Subtitles",
      "properties": {
        "aux_id": "Fluchw/comfyui_subtitle_detector",
        "ver": "0ed24550feb9609fded55eb1b97176afd3d480b1",
        "Node name for S&R": "SubtitleDetectorRapidOCR"
      },
      "widgets_values": [
        "detect_only",
        "MOBILE",
        0.3,
        0.8,
        "sharpen",
        "red_hollow",
        0,
        true,
        "union",
        6
      ]
    },
    {
      "id": 4,
      "type": "SubtitleEraserProPainter",
      "pos": [
        926.3621683806994,
        678.7891200517599
      ],
      "size": [
        315,
        310
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 5
        },
        {
          "name": "masks",
          "type": "MASK",
          "link": 3
        }
      ],
      "outputs": [
        {
          "name": "erased_images",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            8
          ]
        }
      ],
      "title": "3. Erase Subtitles",
      "properties": {
        "aux_id": "Fluchw/comfyui_subtitle_detector",
        "ver": "0ed24550feb9609fded55eb1b97176afd3d480b1",
        "Node name for S&R": "SubtitleEraserProPainter"
      },
      "widgets_values": [
        "ProPainter.pth",
        "raft-things.pth",
        "recurrent_flow_completion.pth",
        4,
        10,
        10,
        80,
        0
      ]
    },
    {
      "id": 6,
      "type": "VHS_VideoCombine",
      "pos": [
        1436.4416110131046,
        633.7668066285089
      ],
      "size": [
        315,
        334
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 8
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": 11
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        },
        {
          "name": "frame_rate",
          "type": "FLOAT",
          "widget": {
            "name": "frame_rate"
          },
          "link": 10
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": null
        }
      ],
      "title": "4. Save Video",
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "3234937ff5f3ca19068aaba5042771514de2429d",
        "Node name for S&R": "VHS_VideoCombine"
      },
      "widgets_values": {
        "frame_rate": 24,
        "loop_count": 0,
        "filename_prefix": "subtitle_erased",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": true,
        "videopreview": ""
      }
    },
    {
      "id": 7,
      "type": "VHS_VideoInfo",
      "pos": [
        50,
        700
      ],
      "size": [
        235,
        206
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [
        {
          "name": "video_info",
          "type": "VHS_VIDEOINFO",
          "link": 9
        }
      ],
      "outputs": [
        {
          "name": "source_fpsğŸŸ¨",
          "type": "FLOAT",
          "slot_index": 0,
          "links": [
            10,
            13
          ]
        },
        {
          "name": "source_frame_countğŸŸ¨",
          "type": "INT",
          "slot_index": 1,
          "links": null
        },
        {
          "name": "source_durationğŸŸ¨",
          "type": "FLOAT",
          "slot_index": 2,
          "links": null
        },
        {
          "name": "source_widthğŸŸ¨",
          "type": "INT",
          "slot_index": 3,
          "links": null
        },
        {
          "name": "source_heightğŸŸ¨",
          "type": "INT",
          "slot_index": 4,
          "links": null
        },
        {
          "name": "loaded_fpsğŸŸ¦",
          "type": "FLOAT",
          "links": null
        },
        {
          "name": "loaded_frame_countğŸŸ¦",
          "type": "INT",
          "links": null
        },
        {
          "name": "loaded_durationğŸŸ¦",
          "type": "FLOAT",
          "links": null
        },
        {
          "name": "loaded_widthğŸŸ¦",
          "type": "INT",
          "links": null
        },
        {
          "name": "loaded_heightğŸŸ¦",
          "type": "INT",
          "links": null
        }
      ],
      "title": "Video Info",
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "3234937ff5f3ca19068aaba5042771514de2429d",
        "Node name for S&R": "VHS_VideoInfo"
      },
      "widgets_values": {}
    },
    {
      "id": 8,
      "type": "VHS_VideoCombine",
      "pos": [
        1097.697308637368,
        93.77171215880892
      ],
      "size": [
        315,
        334
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 12
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        },
        {
          "name": "frame_rate",
          "type": "FLOAT",
          "widget": {
            "name": "frame_rate"
          },
          "link": 13
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": null
        }
      ],
      "title": "Preview Detection (Video)",
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "3234937ff5f3ca19068aaba5042771514de2429d",
        "Node name for S&R": "VHS_VideoCombine"
      },
      "widgets_values": {
        "frame_rate": 24,
        "loop_count": 0,
        "filename_prefix": "detection_preview",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": false,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": false,
        "videopreview": ""
      }
    },
    {
      "id": 10,
      "type": "Note",
      "pos": [
        334.58930255874026,
        -108.56393699090009
      ],
      "size": [
        400,
        200
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Model Download",
      "properties": {},
      "widgets_values": [
        "== æ¨¡å‹ä¸‹è½½ ==\n\n1. å®‰è£… modelscope:\npip install modelscope\n\n2. ä¸‹è½½æ¨¡å‹åˆ° models/DiffuEraser/ ç›®å½•:\nmodelscope download --model Kijai/DiffuEraser_comfy --local_dir models/DiffuEraser/\n\næ¨¡å‹æ–‡ä»¶ç»“æ„:\nmodels/DiffuEraser/\nâ”œâ”€â”€ ProPainter.pth\nâ”œâ”€â”€ raft-things.pth\nâ””â”€â”€ recurrent_flow_completion.pth"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 11,
      "type": "Note",
      "pos": [
        767.5379232615206,
        971.0263618180164
      ],
      "size": [
        500,
        280
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "Eraser Parameters",
      "properties": {},
      "widgets_values": [
        "== SubtitleEraserProPainter å‚æ•°è¯´æ˜ ==\n\nâ€¢ mask_dilation (0-20, é»˜è®¤4)\n  maskè†¨èƒ€åƒç´ ï¼Œæ‰©å¤§æ“¦é™¤åŒºåŸŸè¾¹ç¼˜\n\nâ€¢ ref_stride (1-50, é»˜è®¤10)\n  å‚è€ƒå¸§æ­¥é•¿ï¼Œè¶Šå°è´¨é‡è¶Šå¥½ä½†è¶Šæ…¢\n\nâ€¢ neighbor_length (2-50, é»˜è®¤10)\n  é‚»è¿‘å¸§æ•°é‡ï¼Œç”¨äºæ—¶åºä¸€è‡´æ€§\n\nâ€¢ subvideo_length (10-200, é»˜è®¤80)\n  å­è§†é¢‘é•¿åº¦ï¼Œé•¿è§†é¢‘ä¼šåˆ†æ®µå¤„ç†\n\nâ€¢ raft_iter (1-40, é»˜è®¤20)\n  RAFTå…‰æµè¿­ä»£æ¬¡æ•°ï¼Œè¶Šé«˜ç²¾åº¦è¶Šå¥½ä½†è¶Šæ…¢\n\nâ€¢ fp16 (é»˜è®¤True)\n  åŠç²¾åº¦æ¨ç†ï¼Œå¼€å¯å¯èŠ‚çœæ˜¾å­˜\n\nâ€¢ chunk_size (0-100, é»˜è®¤0=è‡ªåŠ¨)\n  æ¯æ¬¡å¤„ç†å¸§æ•°ï¼Œæ˜¾å­˜å……è¶³å¯å¢å¤§åŠ é€Ÿ"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 12,
      "type": "Note",
      "pos": [
        1771.2558640018053,
        670.3349512483614
      ],
      "size": [
        400,
        200
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "License Notice",
      "properties": {},
      "widgets_values": [
        "== å•†ç”¨è®¸å¯è¯´æ˜ ==\n\næœ¬æ’ä»¶ä½¿ç”¨çš„æ¨¡å‹å’Œä»£ç æœ‰ä¸åŒè®¸å¯è¯ï¼š\n\nâ€¢ RapidOCR: Apache-2.0 (å¯å•†ç”¨)\nâ€¢ ProPainter: ä»…é™éå•†ä¸šç”¨é€”\n  (Non-commercial use only)\n\nå¦‚éœ€å•†ç”¨ï¼Œè¯·ï¼š\n1. è”ç³» ProPainter ä½œè€…è·å–å•†ä¸šæˆæƒ\n2. æˆ–æ›¿æ¢ä¸ºå…¶ä»–å¯å•†ç”¨çš„è§†é¢‘ä¿®å¤æ–¹æ¡ˆ\n\nProPainter é¡¹ç›®åœ°å€:\nhttps://github.com/sczhou/ProPainter"
      ],
      "color": "#432",
      "bgcolor": "#653"
    }
  ],
  "links": [
    [
      1,
      1,
      0,
      2,
      0,
      "IMAGE"
    ],
    [
      3,
      2,
      1,
      4,
      1,
      "MASK"
    ],
    [
      5,
      1,
      0,
      4,
      0,
      "IMAGE"
    ],
    [
      8,
      4,
      0,
      6,
      0,
      "IMAGE"
    ],
    [
      9,
      1,
      3,
      7,
      0,
      "VHS_VIDEOINFO"
    ],
    [
      10,
      7,
      0,
      6,
      4,
      "FLOAT"
    ],
    [
      11,
      1,
      2,
      6,
      1,
      "AUDIO"
    ],
    [
      12,
      2,
      0,
      8,
      0,
      "IMAGE"
    ],
    [
      13,
      7,
      0,
      8,
      4,
      "FLOAT"
    ]
  ],
  "groups": [],
  "config": {},
  "extra": {
    "ds": {
      "scale": 1.0302151269841275,
      "offset": [
        118.29992139245005,
        -129.55431181718126
      ]
    },
    "workflowRendererVersion": "LG",
    "frontendVersion": "1.35.9",
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}